# Keynest

Keynest - это сайт, созданный для генерации запоминающихся, но надежных паролей, а также с возможностью проверки из на безопасность. Пароли можно настраивать: выбирать количество слогов, добавлять цифры или спецсимволы, а также seed - личный трехбуквенный код, для повышения надежности пароля.

## Основные возможности

- **Генерация пароля:** Создание паролей из слогов с настройкой длины, добавлением цифр, символов и seed.
- **Проверка пароля:** Оценка сложности пароля и времени его взлома с проверкой по базе утечек.
- **История паролей**: Локальное сохранение сгенерированных паролей с возможностью просмотра.

## Требования

Для запуска проекта локально вам понадобится:
- **Node.js** для фронтенда.
- **Python** для бэкенда.
- **npm** для управления зависимостями фронтенда.
- **pip** для установки Python-зависимостей.
- Браузер (Chrome, Firefox или Safari) для тестирования.

## Установка
### Фронтенд
1. Склонируйте репозиторий:
```bash
git clone https://github.com/mtfema/keynest.git
cd keynest
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите приложение в режиме разработки:
```bash
npm start
```

Приложение будет доступно по адресу http://localhost:3000.

## Использование

### Генерация пароля

1. Перейдите на страницу /generate.
2. Выберите количество слогов (2–6) с помощью слайдера.
3. Включите опции "Добавить цифры" и "Добавить символы", если нужно.
4. Введите "seed" (до 3 букв, опционально) для уникальности пароля.
5. Нажмите "ГЕНЕРИРОВАТЬ".
6. Скопируйте пароль, нажав на иконку копирования.
### Проверка пароля
1. Перейдите на страницу /check.
2. Введите пароль в поле ввода.
3. Нажмите "Проверить".
4. Просмотрите результаты: сложность, время взлома и рекомендации.
### История паролей
1. Перейдите на страницу /history.
2. Просмотрите сгенерированные пароли, сгруппированные по датам.
3. Нажмите "Показать" для просмотра пароля или "Очистить историю" для удаления.


## Структура проекта

### Фронтенд
- src/App.js: Основной компонент с маршрутизацией.
- src/pages/Generate.js: Страница генерации паролей.
- src/pages/Check.js: Страница проверки паролей.
- src/pages/History.js: Страница истории паролей.
- src/pages/Home.js: Главная страница.
- src/pages/Donate.js: Страница с информацией о поддержке проекта.
- src/components/Navigation.js: Блок с навигацией.
- src/components/Footer.js: Блок с Футер.
- src/styles/: CSS-файлы для стилизации.
- src/config.js: Конфигурация API (API_URL).
- src/Check.test.js: Тесты на страницу Check.
- src/Generate.test.js: Тесты на страницу Generate.

### Бэкенд
- server/App.py: Flask-приложение с эндпоинтами /generate и /check.
- server/tests/: Тесты на Бэкенд.
- /etc/secrets/: Файлы SYLLABLES_DATA и YEARS_DATA для генерации паролей.

## API
### Эндпоинт /generate
- **Метод**: POST
- **Тело запроса**:
```json
{
    "syllables": 5,
    "numbers": false,
    "symbols": false,
    "seed": "abc"
}
```

- **Ответ**:
```json
{
    "password": "abc-test-pass-123",
    "associations": ["код: abc", "тест", "пароль", "123"]
}
```

### Эндпоинт /check
- **Метод**: POST
- **Тело запроса**:
```json
{
    "password": "testpassword123"
}
```

- **Ответ**:
```json
{
    "strength": "Надежный",
    "time": "100 лет",
    "suggestion": null
}
```

## Тестирование

### Фронтенд
Проект включает юнит-тесты для фронтенда.

1. Установите зависимости для тестов:
```bash
npm install --save-dev @testing-library/react @testing-library/jest-dom @testing-library/user-event identity-obj-proxy
```
2. Запустите тесты на Generate:
```bash
npm test Generate.test.js
```
3. Запустите тесты на Check:
```bash
npm test Check.test.js
```
3. Тесты покрывают:
- Изменение количества слогов с помощью слайдера.
- Генерацию пароля и сохранение в localStorage.
- Копирование пароля в буфер обмена.
- Отображение CheckPage со всеми элементами.
- Отправление пароля на проверку и отображение результата.
### Бэкенд
Проект включает юнит- и интеграционные тесты для бэкенда, написанные с использованием pytest. Тесты проверяют функциональность API и внутренних функций.
#### Установка зависимостей
1. Перейдите в директорию бэкенда:
```bash
cd server
```
2. Установите зависимости:
```bash
pip install flask flask-cors unidecode requests pytest pytest-flask requests-mock
```
#### Запуск тестов
1. Убедитесь, что вы находитесь в директории server/:
```bash
cd C:\Users\user\Documents\PasswordPill\keynest\server
```
2. Запустите тесты:
```bash
pytest tests/test_app.py -v
```
#### Покрытие тестов
Тесты охватывают следующие аспекты бэкенда:
- **Эндпоинт** /: Проверка приветственного сообщения.
- **Эндпоинт** /generate:
    - Успешная генерация пароля с различными параметрами (количество слогов, цифры, символы, seed).
    - Обработка некорректных входных данных.
    - Проверка возвращаемого пароля.
- **Эндпоинт** /check:
    - Проверка надежных, слабых и компрометированных паролей.
    - Интеграция с Have I Been Pwned API.
    - Обработка пустых паролей и отсутствие JSON в запросе.
- **Функции**:
    - get_seed_suffix: Тестирование очистки и транслитерации seed.
    - generate_password_logic: Генерация пароля с использованием словарей слогов.
    - evaluate_password: Оценка сложности пароля и времени взлома.
    - is_in_leaked_database: Проверка пароля на утечки через Have I Been Pwned API (mock).